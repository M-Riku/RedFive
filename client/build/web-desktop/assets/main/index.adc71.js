window.__require=function t(e,o,r){function n(s,l){if(!o[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var a="function"==typeof __require&&__require;if(!l&&a)return a(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var p=o[s]={exports:{}};e[s][0].call(p.exports,function(t){return n(e[s][1][t]||t)},p,p.exports,t,e,o,r)}return o[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<r.length;s++)n(r[s]);return n}({ConfigEnum:[function(t,e,o){"use strict";cc._RF.push(e,"a486f2ATC1BarXc7sDwEPbE","ConfigEnum"),Object.defineProperty(o,"__esModule",{value:!0}),o.ESuit=void 0,function(t){t[t.HeiTao=0]="HeiTao",t[t.HongXin=1]="HongXin",t[t.MeiHua=2]="MeiHua",t[t.FangKuai=3]="FangKuai",t[t.Joker=4]="Joker"}(o.ESuit||(o.ESuit={})),cc._RF.pop()},{}],GameCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"d69bduRMVtFSIjPnrTdvZyb","GameCtrl"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("./PlayerPostion"),n=t("./UIPoker"),i=function(){function t(){this.pokerPrefab=null,this.pokerContainer=null,this.playPokersBtn=null,this.regretPokersBtn=null,this.setHolePokersBtn=null,this.curPlayerLable=null,this.otherPlayerLable=null,this.curPlayer=null,this.otherPlayers=[],this.playPokers={pokers:[]}}return t.prototype.Init=function(t,e,o,r,n,i,s,l){this.pokerContainer=t,this.pokerPrefab=e,this.playPokersBtn=o,this.regretPokersBtn=r,this.setHolePokersBtn=n,this.curPlayerLable=i,this.otherPlayerLable=s,this.curPlayer=l,this.playPokersBtn.node.on("click",this.OnPlayPokersBtnClick.bind(this)),this.regretPokersBtn.node.on("click",this.OnRegretPokersBtnClick.bind(this)),this.setHolePokersBtn.node.on("click",this.OnSetHolePokersBtnClick.bind(this)),this.getOtherPlayersName()},t.prototype.OnPlayPokersBtnClick=function(){console.log("play pokers");var t=new XMLHttpRequest,e=JSON.stringify(this.playPokers.pokers);t.open("POST","/game/play-cards/"+this.curPlayer,!0),t.setRequestHeader("Content-Type","application/json"),t.send(e),this.playPokers.pokers=[]},t.prototype.OnRegretPokersBtnClick=function(){console.log("regret pokers");var t=new XMLHttpRequest;t.open("POST","/game/regret-cards/"+this.curPlayer,!0),t.setRequestHeader("Content-Type","application/json"),t.send()},t.prototype.OnSetHolePokersBtnClick=function(){console.log("set hole pokers");var t=new XMLHttpRequest,e=JSON.stringify(this.playPokers.pokers);t.open("POST","/game/set-hole-pokers/"+this.curPlayer,!0),t.setRequestHeader("Content-Type","application/json"),t.send(e),this.playPokers.pokers=[]},t.prototype.getOtherPlayersName=function(){var t=this,e=new XMLHttpRequest;e.open("GET","/game/list-other-players/"+this.curPlayer,!1),e.onload=function(){t.otherPlayers=JSON.parse(e.responseText)},e.send()},t.prototype.CreateUIPoker=function(t,e,o){var r=cc.instantiate(this.pokerPrefab).getComponent(n.default);return r.Init(t,this.playPokers),r.node.setPosition(e,o),r},t.prototype.ShowUIPoker=function(t,e,o){var n=this;t.length>31?this.setHolePokersBtn.node.active=!0:this.setHolePokersBtn.node.active=!1,this.playPokers.pokers=[],this.curPlayerLable.string=this.curPlayer+": "+t.length+"\u5f20",this.pokerContainer.destroyAllChildren(),this.SortPokers(t);var i=30*-Math.floor(t.length/2),s=-250;t.forEach(function(t,e){var o=n.CreateUIPoker(t,i+30*e,s);n.pokerContainer.addChild(o.node)}),this.SortPokers(e),i=30*-Math.floor(e.length/2),s=-100,e.forEach(function(t,e){var o=n.CreateUIPoker(t,i+30*e,s);o.selectBtn.node.active=!1,n.pokerContainer.addChild(o.node)}),this.otherPlayers.forEach(function(t,e){var l=o.find(function(e){return e.playerId===t});n.otherPlayerLable[e].string=t+": "+l.pokers.length+"\u5f20",i=r.default[e].x-30*Math.floor(l.playedPokers.length/2),s=r.default[e].y,l.playedPokers.forEach(function(t,e){var o=n.CreateUIPoker(t,i+30*e,s);o.selectBtn.node.active=!1,n.pokerContainer.addChild(o.node)})})},t.prototype.SortPokers=function(t){t.sort(function(t,e){return t.mainPoint>e.mainPoint?1:-1}),t.sort(function(t,e){return t.mainSuit<e.mainSuit?1:-1})},t}();o.default=i,cc._RF.pop()},{"./PlayerPostion":"PlayerPostion","./UIPoker":"UIPoker"}],GameNet:[function(t,e,o){"use strict";cc._RF.push(e,"2a2d1o99FNFd4vk6xVNYnTw","GameNet"),Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function t(){this.ws=null}return t.getInstance=function(){return null===t.instance&&(t.instance=new t),t.instance},t.prototype.init=function(t,e){null==this.ws&&(this.ws=new WebSocket("ws://20.89.20.11/wsgame"),this.ws.onopen=function(){console.log("success to connect to websocket server!")},this.ws.onmessage=function(o){t.call(e,o.data)})},t.instance=null,t}();o.default=r,cc._RF.pop()},{}],GameScene:[function(t,e,o){"use strict";cc._RF.push(e,"79fceVcQMdGnaD7sfmz12b8","GameScene");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(n=t[l])&&(s=(i<3?n(s):i>3?n(e,o,s):n(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./GameNet"),l=t("./GameCtrl"),c=cc._decorator,a=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pokerContainer=null,e.pokerPrefab=null,e.playerIdEditBox=null,e.startGameBtn=null,e.playPokersBtn=null,e.regretPokersBtn=null,e.setHolePokersBtn=null,e.curPlayerLable=null,e.playerIdNext1Lable=null,e.playerIdNext2Lable=null,e.playerIdNext3Lable=null,e.playerIdNext4Lable=null,e.otherPlayerLable=[],e.m_gameCtrl=null,e.curPlayer=null,e}return n(e,t),e.prototype.start=function(){this.startGameBtn.node.on("click",this.StartGame.bind(this)),this.playPokersBtn.node.active=!1,this.regretPokersBtn.node.active=!1,this.setHolePokersBtn.node.active=!1,this.otherPlayerLable.push(this.playerIdNext1Lable),this.otherPlayerLable.push(this.playerIdNext2Lable),this.otherPlayerLable.push(this.playerIdNext3Lable),this.otherPlayerLable.push(this.playerIdNext4Lable),this.m_gameCtrl=new l.default},e.prototype.StartGame=function(){this.curPlayer=this.playerIdEditBox.string,this.curPlayerLable.string=this.curPlayer,this.m_gameCtrl.Init(this.pokerContainer,this.pokerPrefab,this.playPokersBtn,this.regretPokersBtn,this.setHolePokersBtn,this.curPlayerLable,this.otherPlayerLable,this.curPlayer),s.default.getInstance().init(this.PlayGame,this),this.playerIdEditBox.node.active=!1,this.startGameBtn.node.active=!1,this.playPokersBtn.node.active=!0,this.regretPokersBtn.node.active=!0},e.prototype.PlayGame=function(t){var e=this,o=JSON.parse(t),r=o.find(function(t){return t.playerId===e.curPlayer}).pokers,n=o.find(function(t){return t.playerId===e.curPlayer}).playedPokers,i=o.filter(function(t){return t.playerId!==e.curPlayer&&"\u5e84\u5bb6"!==t.playerId});this.m_gameCtrl.ShowUIPoker(r,n,i)},i([p(cc.Node)],e.prototype,"pokerContainer",void 0),i([p(cc.Prefab)],e.prototype,"pokerPrefab",void 0),i([p(cc.EditBox)],e.prototype,"playerIdEditBox",void 0),i([p(cc.Button)],e.prototype,"startGameBtn",void 0),i([p(cc.Button)],e.prototype,"playPokersBtn",void 0),i([p(cc.Button)],e.prototype,"regretPokersBtn",void 0),i([p(cc.Button)],e.prototype,"setHolePokersBtn",void 0),i([p(cc.Label)],e.prototype,"curPlayerLable",void 0),i([p(cc.Label)],e.prototype,"playerIdNext1Lable",void 0),i([p(cc.Label)],e.prototype,"playerIdNext2Lable",void 0),i([p(cc.Label)],e.prototype,"playerIdNext3Lable",void 0),i([p(cc.Label)],e.prototype,"playerIdNext4Lable",void 0),i([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./GameCtrl":"GameCtrl","./GameNet":"GameNet"}],PlayerPostion:[function(t,e,o){"use strict";cc._RF.push(e,"7545eQuBQBEQLUbq3mGZmd2","PlayerPostion"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=[{x:400,y:50},{x:200,y:250},{x:-200,y:250},{x:-400,y:50}],cc._RF.pop()},{}],Poker:[function(t,e,o){"use strict";cc._RF.push(e,"633f9hxCedGxZlDxyM9VKUl","Poker"),Object.defineProperty(o,"__esModule",{value:!0});o.default=function(t,e,o,r,n){this.pokerId=null,this.point=null,this.suit=null,this.mainPoint=null,this.mainSuit=null,this.pokerId=t,this.point=e,this.suit=o,this.mainPoint=r||e,this.mainSuit=n||o},cc._RF.pop()},{}],SplashScene:[function(t,e,o){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","SplashScene");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(n=t[l])&&(s=(i<3?n(s):i>3?n(e,o,s):n(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,c=s.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e}return n(e,t),e.prototype.start=function(){this.label.string="\u8fd9\u662f\u52a0\u8f7d\u573a\u666f",setTimeout(function(){cc.director.loadScene("StartScene")},0)},i([c(cc.Label)],e.prototype,"label",void 0),i([l],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],StartScene:[function(t,e,o){"use strict";cc._RF.push(e,"adebcGkFlVI2oBbC2KkpgkT","StartScene");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(n=t[l])&&(s=(i<3?n(s):i>3?n(e,o,s):n(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,c=s.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PlayBtn=null,e}return n(e,t),e.prototype.start=function(){this.PlayBtn.node.on("click",this.OnPlayBtnClick.bind(this))},e.prototype.OnPlayBtnClick=function(){cc.director.loadScene("GameScene")},i([c(cc.Button)],e.prototype,"PlayBtn",void 0),i([l],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],UIPoker:[function(t,e,o){"use strict";cc._RF.push(e,"20424lsiAxOgL7Os6n2SJrc","UIPoker");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(n=t[l])&&(s=(i<3?n(s):i>3?n(e,o,s):n(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./ConfigEnum"),l={1:"A",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"J",12:"Q",13:"K",91:"\u5c0f",92:"\u5927"},c=cc._decorator,a=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bigSuitSprite=null,e.smallSuitSprite=null,e.pointLabel=null,e.texFrontBG=null,e.texBackBG=null,e.bigSuits=[],e.smallSuits=[],e.texFaces=[],e.selectBtn=null,e.redTextColor=cc.color(183,24,40),e.blackTextColor=cc.Color.BLACK,e.poker=null,e.playPokers={pokers:[]},e}return n(e,t),e.prototype.Init=function(t,e){this.poker=t,this.playPokers=e,this.pointLabel.string=""+l[t.point],this.pointLabel.node.color=t.suit==s.ESuit.HeiTao||t.suit==s.ESuit.MeiHua?this.blackTextColor:this.redTextColor,t.point>=11?this.bigSuitSprite.spriteFrame=this.texFaces[t.point-11]:this.bigSuitSprite.spriteFrame=this.bigSuits[t.suit],this.smallSuitSprite.spriteFrame=this.smallSuits[t.suit],this.selectBtn.node.on("click",this.OnSelectBtnClick.bind(this))},e.prototype.OnSelectBtnClick=function(){var t=this,e=this.node.getPosition().x,o=this.node.getPosition().y;-250===o?(o+=20,0===this.playPokers.pokers.filter(function(e){return e.pokerId===t.poker.pokerId}).length&&this.playPokers.pokers.push(this.poker)):(o-=20,this.playPokers.pokers=this.playPokers.pokers.filter(function(e){return e.pokerId!==t.poker.pokerId})),this.node.setPosition(e,o)},i([p(cc.Sprite)],e.prototype,"bigSuitSprite",void 0),i([p(cc.Sprite)],e.prototype,"smallSuitSprite",void 0),i([p(cc.Label)],e.prototype,"pointLabel",void 0),i([p(cc.SpriteFrame)],e.prototype,"texFrontBG",void 0),i([p(cc.SpriteFrame)],e.prototype,"texBackBG",void 0),i([p(cc.SpriteFrame)],e.prototype,"bigSuits",void 0),i([p(cc.SpriteFrame)],e.prototype,"smallSuits",void 0),i([p(cc.SpriteFrame)],e.prototype,"texFaces",void 0),i([p(cc.Button)],e.prototype,"selectBtn",void 0),i([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./ConfigEnum":"ConfigEnum"}]},{},["ConfigEnum","GameCtrl","GameNet","GameScene","PlayerPostion","Poker","SplashScene","StartScene","UIPoker"]);