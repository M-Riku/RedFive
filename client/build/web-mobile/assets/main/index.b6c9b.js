window.__require=function t(e,o,r){function n(l,s){if(!o[l]){if(!e[l]){var a=l.split("/");if(a=a[a.length-1],!e[a]){var c="function"==typeof __require&&__require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+l+"'")}l=a}var p=o[l]={exports:{}};e[l][0].call(p.exports,function(t){return n(e[l][1][t]||t)},p,p.exports,t,e,o,r)}return o[l].exports}for(var i="function"==typeof __require&&__require,l=0;l<r.length;l++)n(r[l]);return n}({ConfigEnum:[function(t,e,o){"use strict";cc._RF.push(e,"a486f2ATC1BarXc7sDwEPbE","ConfigEnum"),Object.defineProperty(o,"__esModule",{value:!0}),o.ESuit=void 0,function(t){t[t.HeiTao=0]="HeiTao",t[t.HongXin=1]="HongXin",t[t.MeiHua=2]="MeiHua",t[t.FangKuai=3]="FangKuai",t[t.Joker=4]="Joker"}(o.ESuit||(o.ESuit={})),cc._RF.pop()},{}],GameCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"d69bduRMVtFSIjPnrTdvZyb","GameCtrl"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("./GameNet"),n=t("./PlayerPostion"),i=t("./UIPoker"),l=function(){function t(){this.pokerContainer=null,this.pokerPrefab=null,this.playerIdEditBox=null,this.startGameBtn=null,this.notificationLable=null,this.playPokersBtn=null,this.regretPokersBtn=null,this.setHolePokersBtn=null,this.curPlayerLable=null,this.otherPlayerLable=null,this.curPlayer=null,this.otherPlayers=[],this.playPokers={pokers:[]}}return t.prototype.Init=function(t,e,o,r,n,i,l,s,a,c){this.pokerContainer=t,this.pokerPrefab=e,this.playerIdEditBox=o,this.startGameBtn=r,this.notificationLable=n,this.playPokersBtn=i,this.regretPokersBtn=l,this.setHolePokersBtn=s,this.curPlayerLable=a,this.otherPlayerLable=c,this.startGameBtn.node.on("click",this.OnStartGameBtnClick.bind(this)),this.playPokersBtn.node.on("click",this.OnPlayPokersBtnClick.bind(this)),this.regretPokersBtn.node.on("click",this.OnRegretPokersBtnClick.bind(this)),this.setHolePokersBtn.node.on("click",this.OnSetHolePokersBtnClick.bind(this))},t.prototype.PlayGame=function(t){var e=this;this.getOtherPlayersName();var o=JSON.parse(t),r=o.find(function(t){return t.playerId===e.curPlayer}),n=[],i=[];r&&(n=r.pokers,i=r.playedPokers);var l=o.filter(function(t){return t.playerId!==e.curPlayer&&"\u5e84\u5bb6"!==t.playerId});this.ShowUIPoker(n,i,l)},t.prototype.OnStartGameBtnClick=function(){var t=this,e=new XMLHttpRequest;e.open("Post","/game/player-login/"+this.playerIdEditBox.string,!0),e.setRequestHeader("Content-Type","application/json"),e.onload=function(){200===e.status?(t.curPlayer=t.playerIdEditBox.string,t.curPlayerLable.string=t.curPlayer,r.default.getInstance().createWebSocket(t.PlayGame,t),t.notificationLable.string="",t.playerIdEditBox.node.active=!1,t.startGameBtn.node.active=!1,t.playPokersBtn.node.active=!0,t.regretPokersBtn.node.active=!0):t.notificationLable.string=e.response},e.send()},t.prototype.OnPlayPokersBtnClick=function(){console.log("play pokers");var t=new XMLHttpRequest,e=JSON.stringify(this.playPokers.pokers);t.open("POST","/game/play-cards/"+this.curPlayer,!0),t.setRequestHeader("Content-Type","application/json"),t.send(e),this.playPokers.pokers=[]},t.prototype.OnRegretPokersBtnClick=function(){console.log("regret pokers");var t=new XMLHttpRequest;t.open("POST","/game/regret-cards/"+this.curPlayer,!0),t.setRequestHeader("Content-Type","application/json"),t.send()},t.prototype.OnSetHolePokersBtnClick=function(){console.log("set hole pokers");var t=new XMLHttpRequest,e=JSON.stringify(this.playPokers.pokers);t.open("POST","/game/set-hole-pokers/"+this.curPlayer,!0),t.setRequestHeader("Content-Type","application/json"),t.send(e),this.playPokers.pokers=[]},t.prototype.getOtherPlayersName=function(){var t=this,e=new XMLHttpRequest;e.open("GET","/game/list-other-players/"+this.curPlayer,!1),e.onload=function(){t.otherPlayers=JSON.parse(e.responseText)},e.send()},t.prototype.CreateUIPoker=function(t,e,o){var r=cc.instantiate(this.pokerPrefab).getComponent(i.default);return r.Init(t,this.playPokers),r.node.setPosition(e,o),r},t.prototype.ShowUIPoker=function(t,e,o){var r=this;t.length>31?this.setHolePokersBtn.node.active=!0:this.setHolePokersBtn.node.active=!1,this.playPokers.pokers=[],this.curPlayerLable.string=this.curPlayer+": "+t.length+"\u5f20",this.pokerContainer.destroyAllChildren(),this.SortPokers(t);var i=30*-Math.floor(t.length/2),l=-250;t.forEach(function(t,e){var o=r.CreateUIPoker(t,i+30*e,l);r.pokerContainer.addChild(o.node)}),this.SortPokers(e),i=30*-Math.floor(e.length/2),l=-100,e.forEach(function(t,e){var o=r.CreateUIPoker(t,i+30*e,l);o.selectBtn.node.active=!1,r.pokerContainer.addChild(o.node)}),this.otherPlayers.forEach(function(t,e){var s=o.find(function(e){return e.playerId===t});r.otherPlayerLable[e].string=t+": "+s.pokers.length+"\u5f20",i=n.default[e].x-30*Math.floor(s.playedPokers.length/2),l=n.default[e].y,s.playedPokers.forEach(function(t,e){var o=r.CreateUIPoker(t,i+30*e,l);o.selectBtn.node.active=!1,r.pokerContainer.addChild(o.node)})})},t.prototype.SortPokers=function(t){t.sort(function(t,e){return t.mainPoint>e.mainPoint?1:-1}),t.sort(function(t,e){return t.mainSuit<e.mainSuit?1:-1})},t}();o.default=l,cc._RF.pop()},{"./GameNet":"GameNet","./PlayerPostion":"PlayerPostion","./UIPoker":"UIPoker"}],GameNet:[function(t,e,o){"use strict";cc._RF.push(e,"2a2d1o99FNFd4vk6xVNYnTw","GameNet"),Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function t(){this.ws=null,this.callback=null,this.target=null}return t.getInstance=function(){return null===t.instance&&(t.instance=new t),t.instance},t.prototype.createWebSocket=function(t,e){this.callback=t,this.target=e,this.init()},t.prototype.init=function(){var t=this;this.ws=new WebSocket("ws://35.213.122.214/wsgame"),this.ws.onopen=function(){console.log("success to connect to websocket server!")},this.ws.onclose=function(){console.log("connection to websocket closed, try to reconnect."),setTimeout(function(){t.init()},1e3)},this.ws.onmessage=function(e){t.callback.call(t.target,e.data)}},t.instance=null,t}();o.default=r,cc._RF.pop()},{}],GameScene:[function(t,e,o){"use strict";cc._RF.push(e,"79fceVcQMdGnaD7sfmz12b8","GameScene");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,l=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(l=(i<3?n(l):i>3?n(e,o,l):n(e,o))||l);return i>3&&l&&Object.defineProperty(e,o,l),l};Object.defineProperty(o,"__esModule",{value:!0});var l=t("./GameCtrl"),s=cc._decorator,a=s.ccclass,c=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pokerContainer=null,e.pokerPrefab=null,e.playerIdEditBox=null,e.startGameBtn=null,e.notificationLable=null,e.playPokersBtn=null,e.regretPokersBtn=null,e.setHolePokersBtn=null,e.curPlayerLable=null,e.playerIdNext1Lable=null,e.playerIdNext2Lable=null,e.playerIdNext3Lable=null,e.playerIdNext4Lable=null,e.otherPlayerLable=[],e.m_gameCtrl=null,e}return n(e,t),e.prototype.start=function(){this.playPokersBtn.node.active=!1,this.regretPokersBtn.node.active=!1,this.setHolePokersBtn.node.active=!1,this.otherPlayerLable.push(this.playerIdNext1Lable),this.otherPlayerLable.push(this.playerIdNext2Lable),this.otherPlayerLable.push(this.playerIdNext3Lable),this.otherPlayerLable.push(this.playerIdNext4Lable),this.m_gameCtrl=new l.default,this.m_gameCtrl.Init(this.pokerContainer,this.pokerPrefab,this.playerIdEditBox,this.startGameBtn,this.notificationLable,this.playPokersBtn,this.regretPokersBtn,this.setHolePokersBtn,this.curPlayerLable,this.otherPlayerLable)},i([c(cc.Node)],e.prototype,"pokerContainer",void 0),i([c(cc.Prefab)],e.prototype,"pokerPrefab",void 0),i([c(cc.EditBox)],e.prototype,"playerIdEditBox",void 0),i([c(cc.Button)],e.prototype,"startGameBtn",void 0),i([c(cc.Label)],e.prototype,"notificationLable",void 0),i([c(cc.Button)],e.prototype,"playPokersBtn",void 0),i([c(cc.Button)],e.prototype,"regretPokersBtn",void 0),i([c(cc.Button)],e.prototype,"setHolePokersBtn",void 0),i([c(cc.Label)],e.prototype,"curPlayerLable",void 0),i([c(cc.Label)],e.prototype,"playerIdNext1Lable",void 0),i([c(cc.Label)],e.prototype,"playerIdNext2Lable",void 0),i([c(cc.Label)],e.prototype,"playerIdNext3Lable",void 0),i([c(cc.Label)],e.prototype,"playerIdNext4Lable",void 0),i([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./GameCtrl":"GameCtrl"}],PlayerPostion:[function(t,e,o){"use strict";cc._RF.push(e,"7545eQuBQBEQLUbq3mGZmd2","PlayerPostion"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=[{x:400,y:50},{x:200,y:250},{x:-200,y:250},{x:-400,y:50}],cc._RF.pop()},{}],Poker:[function(t,e,o){"use strict";cc._RF.push(e,"633f9hxCedGxZlDxyM9VKUl","Poker"),Object.defineProperty(o,"__esModule",{value:!0});o.default=function(t,e,o,r,n){this.pokerId=null,this.point=null,this.suit=null,this.mainPoint=null,this.mainSuit=null,this.pokerId=t,this.point=e,this.suit=o,this.mainPoint=r||e,this.mainSuit=n||o},cc._RF.pop()},{}],SplashScene:[function(t,e,o){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","SplashScene");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,l=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(l=(i<3?n(l):i>3?n(e,o,l):n(e,o))||l);return i>3&&l&&Object.defineProperty(e,o,l),l};Object.defineProperty(o,"__esModule",{value:!0});var l=cc._decorator,s=l.ccclass,a=l.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e}return n(e,t),e.prototype.start=function(){this.label.string="\u8fd9\u662f\u52a0\u8f7d\u573a\u666f",setTimeout(function(){cc.director.loadScene("StartScene")},0)},i([a(cc.Label)],e.prototype,"label",void 0),i([s],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],StartScene:[function(t,e,o){"use strict";cc._RF.push(e,"adebcGkFlVI2oBbC2KkpgkT","StartScene");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,l=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(l=(i<3?n(l):i>3?n(e,o,l):n(e,o))||l);return i>3&&l&&Object.defineProperty(e,o,l),l};Object.defineProperty(o,"__esModule",{value:!0});var l=cc._decorator,s=l.ccclass,a=l.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PlayBtn=null,e}return n(e,t),e.prototype.start=function(){this.PlayBtn.node.on("click",this.OnPlayBtnClick.bind(this))},e.prototype.OnPlayBtnClick=function(){cc.director.loadScene("GameScene")},i([a(cc.Button)],e.prototype,"PlayBtn",void 0),i([s],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],UIPoker:[function(t,e,o){"use strict";cc._RF.push(e,"20424lsiAxOgL7Os6n2SJrc","UIPoker");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,l=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(l=(i<3?n(l):i>3?n(e,o,l):n(e,o))||l);return i>3&&l&&Object.defineProperty(e,o,l),l};Object.defineProperty(o,"__esModule",{value:!0});var l=t("./ConfigEnum"),s={1:"A",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"J",12:"Q",13:"K",91:"\u5c0f",92:"\u5927"},a=cc._decorator,c=a.ccclass,p=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bigSuitSprite=null,e.smallSuitSprite=null,e.pointLabel=null,e.texFrontBG=null,e.texBackBG=null,e.bigSuits=[],e.smallSuits=[],e.texFaces=[],e.selectBtn=null,e.redTextColor=cc.color(183,24,40),e.blackTextColor=cc.Color.BLACK,e.poker=null,e.playPokers={pokers:[]},e}return n(e,t),e.prototype.Init=function(t,e){this.poker=t,this.playPokers=e,this.pointLabel.string=""+s[t.point],this.pointLabel.node.color=t.suit==l.ESuit.HeiTao||t.suit==l.ESuit.MeiHua?this.blackTextColor:this.redTextColor,t.point>=11?this.bigSuitSprite.spriteFrame=this.texFaces[t.point-11]:this.bigSuitSprite.spriteFrame=this.bigSuits[t.suit],this.smallSuitSprite.spriteFrame=this.smallSuits[t.suit],this.selectBtn.node.on("click",this.OnSelectBtnClick.bind(this))},e.prototype.OnSelectBtnClick=function(){var t=this,e=this.node.getPosition().x,o=this.node.getPosition().y;-250===o?(o+=20,0===this.playPokers.pokers.filter(function(e){return e.pokerId===t.poker.pokerId}).length&&this.playPokers.pokers.push(this.poker)):(o-=20,this.playPokers.pokers=this.playPokers.pokers.filter(function(e){return e.pokerId!==t.poker.pokerId})),this.node.setPosition(e,o)},i([p(cc.Sprite)],e.prototype,"bigSuitSprite",void 0),i([p(cc.Sprite)],e.prototype,"smallSuitSprite",void 0),i([p(cc.Label)],e.prototype,"pointLabel",void 0),i([p(cc.SpriteFrame)],e.prototype,"texFrontBG",void 0),i([p(cc.SpriteFrame)],e.prototype,"texBackBG",void 0),i([p(cc.SpriteFrame)],e.prototype,"bigSuits",void 0),i([p(cc.SpriteFrame)],e.prototype,"smallSuits",void 0),i([p(cc.SpriteFrame)],e.prototype,"texFaces",void 0),i([p(cc.Button)],e.prototype,"selectBtn",void 0),i([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./ConfigEnum":"ConfigEnum"}]},{},["ConfigEnum","GameCtrl","GameNet","GameScene","PlayerPostion","Poker","SplashScene","StartScene","UIPoker"]);